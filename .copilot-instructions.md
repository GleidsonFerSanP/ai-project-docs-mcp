# ü§ñ Copilot Instructions - Project Docs MCP

> **IMPORTANTE**: Estas instru√ß√µes devem ser seguidas em TODAS as intera√ß√µes neste projeto.

## üìã Workflow Obrigat√≥rio

### Antes de Qualquer Mudan√ßa

1. **Identifique o contexto do arquivo**:

   ```
   @project-docs identify_context {"file_path": "<caminho-do-arquivo>"}
   ```

2. **Obtenha contratos cr√≠ticos** (se backend/frontend/infra):

   ```
   @project-docs get_contracts {"context": "backend"}
   ```

3. **Consulte contexto completo do projeto**:
   ```
   Use o prompt: @project-docs:project-context
   ```

### Antes de Criar Documenta√ß√£o

1. **SEMPRE verificar se j√° existe**:

   ```
   @project-docs check_existing_documentation {
     "title": "t√≠tulo proposto",
     "topics": ["t√≥pico1", "t√≥pico2"],
     "keywords": ["keyword1", "keyword2"]
   }
   ```

2. **Se similaridade ‚â• 50%**: ATUALIZAR documento existente, N√ÉO criar novo

3. **Registrar metadata** ap√≥s criar/atualizar arquivo:
   ```
   @project-docs manage_documentation {
     "action": "create" ou "update",
     "title": "...",
     "file_path": "caminho/relativo.md",
     "topics": [...],
     "keywords": [...],
     "summary": "..."
   }
   ```

### Ao Implementar C√≥digo

1. **Validar contra contratos registrados**:

   ```
   @project-docs validate_contract {
     "contract_name": "NomeDoContrato",
     "code": "c√≥digo a validar"
   }
   ```

2. **Aplicar padr√µes conhecidos** - consulte patterns com:
   ```
   @project-docs get_feature_context {"feature_id": "feature-relacionada"}
   ```

### Ao Fazer Decis√µes Arquiteturais

1. **Registrar a decis√£o**:
   ```
   @project-docs add_decision {
     "title": "T√≠tulo da decis√£o",
     "context": "Por que essa decis√£o foi necess√°ria",
     "decision": "O que foi decidido",
     "alternatives": ["Alt 1", "Alt 2"],
     "positive_consequences": ["Pro 1"],
     "negative_consequences": ["Con 1"]
   }
   ```

## üéØ Stack do Projeto

- **MCP Server**: TypeScript + @modelcontextprotocol/sdk
- **VS Code Extension**: TypeScript + VS Code API
- **Protocol**: MCP stdio transport
- **Storage**: JSON files (~/.project-docs-mcp/)

## üèóÔ∏è Princ√≠pios Arquiteturais

1. **Clean Architecture**: Separa√ß√£o clara entre dom√≠nio, aplica√ß√£o e infra
2. **Single Responsibility**: Cada m√≥dulo tem uma responsabilidade √∫nica
3. **MCP Standards**: Seguir rigorosamente o protocolo MCP
4. **Zero Config**: Funcionar out-of-the-box sem configura√ß√£o manual
5. **Cross-platform**: macOS, Linux, Windows

## üîí Contratos Cr√≠ticos

### MCP Server

- Deve usar stdio transport (n√£o HTTP)
- Tools devem retornar formato `{ content: [{ type: 'text', text: string }] }`
- Errors devem ser tratados e retornados como JSON v√°lido

### VS Code Extension

- Deve registrar via `vscode.lm.registerMcpServerDefinitionProvider`
- Deve declarar `mcpServerDefinitionProviders` no package.json
- Deve incluir node_modules do mcp-server no .vsix

## üìù Conven√ß√µes de C√≥digo

- **TypeScript strict mode** habilitado
- **Imports**: Sempre usar extens√£o `.js` para imports de arquivos locais
- **Error handling**: Sempre catch e retornar mensagens claras
- **Logging**: Usar console.error para erros, evitar console.log em produ√ß√£o

## üö´ O Que NUNCA Fazer

- ‚ùå Criar documenta√ß√£o duplicada sem verificar
- ‚ùå Modificar contratos sem validar implementa√ß√µes existentes
- ‚ùå Fazer decis√µes arquiteturais sem registr√°-las
- ‚ùå Quebrar compatibilidade do protocolo MCP
- ‚ùå Adicionar depend√™ncias sem atualizar package.json do mcp-server

## üìö Recursos √öteis

- MCP Docs: https://modelcontextprotocol.io
- VS Code API: https://code.visualstudio.com/api
- Este projeto no GitHub: https://github.com/GleidsonFerSanP/ai-project-docs-mcp

---

**Lembre-se**: Este projeto DEVE usar seu pr√≥prio MCP para auto-documenta√ß√£o. Pratique o que prega! üéØ
